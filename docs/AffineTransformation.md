# AffineTransformation

**Файли:** `localization/src/AffineTransformation.hpp`, `localization/src/AffineTransformation.cpp`

## Призначення

Проста структура-обгортка для афінної матриці перетворення з ідентифікатором частинки. Використовується при оцінці конфігурацій у `ParticleFastMatch::evaluateConfigs`.

## Поля

| Поле | Тип | Опис |
|------|-----|------|
| `T` | `cv::Mat` | Афінна матриця 2x3 (float) |
| `id` | `int` | Ідентифікатор пов'язаної частинки |

## Використання

`ParticleFastMatch::configsToAffine` конвертує `MatchConfig` об'єкти в `AffineTransformation`, зберігаючи зв'язок з частинкою через `id`. Це дозволяє після оцінки конфігурацій повернути результат до відповідної частинки.

## Афінне перетворення

Матриця `T` (2x3) описує 2D перетворення:

```
| a11  a12  a13 |     | sx*cos(r1)*cos(r2) - sy*sin(r1)*sin(r2)   ...  tx |
| a21  a22  a23 |  =  | sx*cos(r1)*sin(r2) + sy*sin(r1)*cos(r2)   ...  ty |
```

де:
- `tx`, `ty` -- трансляція (позиція частинки)
- `r1` -- первинне обертання (напрямок БПЛА)
- `r2` -- вторинне обертання (корекція)
- `sx`, `sy` -- масштаб по осях
